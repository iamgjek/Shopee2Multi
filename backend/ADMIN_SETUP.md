# ç®¡ç†å“¡å¸³è™Ÿè¨­ç½®æŒ‡å—

æœ¬æ–‡ä»¶èªªæ˜å¦‚ä½•å‰µå»ºç®¡ç†å“¡å¸³è™Ÿä¾†è¨ªå•ç®¡ç†å¾Œå°ã€‚

## æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Seed è…³æœ¬ï¼ˆæ¨è–¦ï¼‰

é€™æ˜¯æœ€ç°¡å–®çš„æ–¹æ³•ï¼Œæœƒè‡ªå‹•å‰µå»ºæˆ–æ›´æ–°ç®¡ç†å“¡å¸³è™Ÿã€‚

### æ­¥é©Ÿ

1. **è¨­ç½®ç’°å¢ƒè®Šæ•¸ï¼ˆå¯é¸ï¼‰**
   
   åœ¨ `.env` æ–‡ä»¶ä¸­è¨­ç½®è‡ªè¨‚çš„ç®¡ç†å“¡è³‡è¨Šï¼š
   ```env
   ADMIN_EMAIL=admin@shopee2multi.com
   ADMIN_PASSWORD=Admin@2024!
   ADMIN_NAME=ç³»çµ±ç®¡ç†å“¡
   ```
   
   å¦‚æœä¸è¨­ç½®ï¼Œå°‡ä½¿ç”¨é è¨­å€¼ã€‚

2. **åŸ·è¡Œ Seed è…³æœ¬**
   ```bash
   cd backend
   npm run seed
   ```

3. **æŸ¥çœ‹è¼¸å‡º**
   
   è…³æœ¬æœƒé¡¯ç¤ºå‰µå»ºçš„ç®¡ç†å“¡å¸³è™Ÿè³‡è¨Šï¼š
   ```
   ğŸ“‹ ç®¡ç†å“¡å¸³è™Ÿè³‡è¨Šï¼š
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ“§ Email:     admin@shopee2multi.com
   ğŸ”‘ Password:  Admin@2024!
   ğŸ‘¤ Name:      ç³»çµ±ç®¡ç†å“¡
   ğŸ‘‘ Role:      admin
   ğŸ’ Plan:      biz (å•†æ¥­ç‰ˆ)
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ```

## æ–¹æ³•äºŒï¼šä½¿ç”¨ SQL è…³æœ¬

å¦‚æœæ‚¨åå¥½ç›´æ¥ä½¿ç”¨ SQLï¼š

1. **åŸ·è¡Œ SQL è…³æœ¬**
   ```bash
   psql -U your_username -d your_database -f src/db/create-admin.sql
   ```
   
   æˆ–ä½¿ç”¨æ‚¨å–œæ­¡çš„è³‡æ–™åº«ç®¡ç†å·¥å…·åŸ·è¡Œ `src/db/create-admin.sql` æ–‡ä»¶ã€‚

## æ–¹æ³•ä¸‰ï¼šæ‰‹å‹• SQL æŒ‡ä»¤

ç›´æ¥åœ¨è³‡æ–™åº«ä¸­åŸ·è¡Œä»¥ä¸‹ SQLï¼š

```sql
-- å‰µå»ºç®¡ç†å“¡å¸³è™Ÿï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
INSERT INTO users (email, password_hash, name, plan, status, role)
SELECT 
  'admin@shopee2multi.com',
  '$2a$10$P.jRLvZ.jYO524dBDXeMDuFuZuL9vzNfFeiJEQmpFQnOTsx470Qwy',
  'ç³»çµ±ç®¡ç†å“¡',
  'biz',
  'active',
  'admin'
WHERE NOT EXISTS (
  SELECT 1 FROM users WHERE email = 'admin@shopee2multi.com'
);

-- æˆ–æ›´æ–°ç¾æœ‰ç”¨æˆ¶ç‚ºç®¡ç†å“¡
UPDATE users 
SET 
  role = 'admin',
  plan = 'biz',
  status = 'active',
  updated_at = CURRENT_TIMESTAMP
WHERE email = 'admin@shopee2multi.com';
```

## é è¨­ç®¡ç†å“¡å¸³è™Ÿè³‡è¨Š

| é …ç›® | å€¼ |
|------|-----|
| **Email** | `admin@shopee2multi.com` |
| **Password** | `Admin@2024!` |
| **Name** | `ç³»çµ±ç®¡ç†å“¡` |
| **Role** | `admin` |
| **Plan** | `biz` (å•†æ¥­ç‰ˆ) |

## ç™»å…¥ç®¡ç†å¾Œå°

1. ä½¿ç”¨ä¸Šè¿°å¸³è™Ÿè³‡è¨Šç™»å…¥ç³»çµ±
2. ç™»å…¥å¾Œï¼Œæ‚¨æœƒåœ¨ Header çœ‹åˆ°ã€Œç®¡ç†å¾Œå°ã€é€£çµ
3. é»æ“Šé€²å…¥ç®¡ç†å¾Œå°ï¼Œå¯ä»¥ï¼š
   - æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ¶
   - ç·¨è¼¯ç”¨æˆ¶æ–¹æ¡ˆã€ç‹€æ…‹ã€è§’è‰²
   - æŸ¥çœ‹çµ±è¨ˆæ•¸æ“š

## å®‰å…¨å»ºè­°

âš ï¸ **é‡è¦å®‰å…¨æç¤ºï¼š**

1. **ç«‹å³ä¿®æ”¹å¯†ç¢¼**ï¼šç™»å…¥å¾Œè«‹ç«‹å³ä¿®æ”¹é è¨­å¯†ç¢¼
2. **ä½¿ç”¨å¼·å¯†ç¢¼**ï¼šå»ºè­°ä½¿ç”¨åŒ…å«å¤§å°å¯«å­—æ¯ã€æ•¸å­—å’Œç‰¹æ®Šå­—ç¬¦çš„å¼·å¯†ç¢¼
3. **ä¿è­·å¸³è™Ÿè³‡è¨Š**ï¼šä¸è¦å°‡ç®¡ç†å“¡å¸³è™Ÿè³‡è¨Šåˆ†äº«çµ¦æœªæˆæ¬Šäººå“¡
4. **å®šæœŸå¯©æŸ¥**ï¼šå®šæœŸæª¢æŸ¥ç®¡ç†å“¡å¸³è™Ÿçš„ä½¿ç”¨æƒ…æ³

## ä¿®æ”¹ç®¡ç†å“¡å¯†ç¢¼

### æ–¹æ³•ä¸€ï¼šé€šéç®¡ç†å¾Œå°
1. ç™»å…¥ç®¡ç†å¾Œå°
2. æ‰¾åˆ°è¦ä¿®æ”¹çš„ç”¨æˆ¶
3. ç›®å‰ç³»çµ±ä¸æ”¯æ´ç›´æ¥ä¿®æ”¹å¯†ç¢¼ï¼Œéœ€è¦é€šéè³‡æ–™åº«

### æ–¹æ³•äºŒï¼šé€šéè³‡æ–™åº«
```sql
-- ç”Ÿæˆæ–°çš„ bcrypt hashï¼ˆä½¿ç”¨ Node.jsï¼‰
-- node -e "const bcrypt = require('bcryptjs'); bcrypt.hash('æ–°å¯†ç¢¼', 10).then(hash => console.log(hash));"

-- æ›´æ–°å¯†ç¢¼
UPDATE users 
SET password_hash = 'æ–°çš„_bcrypt_hash',
    updated_at = CURRENT_TIMESTAMP
WHERE email = 'admin@shopee2multi.com';
```

## å‰µå»ºå¤šå€‹ç®¡ç†å“¡

æ‚¨å¯ä»¥å‰µå»ºå¤šå€‹ç®¡ç†å“¡å¸³è™Ÿï¼š

```sql
-- å‰µå»ºå¦ä¸€å€‹ç®¡ç†å“¡
INSERT INTO users (email, password_hash, name, plan, status, role)
VALUES (
  'another-admin@example.com',
  '$2a$10$P.jRLvZ.jYO524dBDXeMDuFuZuL9vzNfFeiJEQmpFQnOTsx470Qwy', -- æ›¿æ›ç‚ºå¯¦éš›çš„ bcrypt hash
  'å¦ä¸€å€‹ç®¡ç†å“¡',
  'biz',
  'active',
  'admin'
);
```

## ç–‘é›£æ’è§£

### å•é¡Œï¼šç„¡æ³•ç™»å…¥ç®¡ç†å¾Œå°
- ç¢ºèªç”¨æˆ¶çš„ `role` æ¬„ä½ç‚º `'admin'`
- ç¢ºèªç”¨æˆ¶çš„ `status` ç‚º `'active'`
- æª¢æŸ¥ JWT token æ˜¯å¦åŒ…å« `role` è³‡è¨Š

### å•é¡Œï¼šçœ‹ä¸åˆ°ã€Œç®¡ç†å¾Œå°ã€é€£çµ
- ç¢ºèªå·²æ­£ç¢ºç™»å…¥
- ç¢ºèªç”¨æˆ¶è§’è‰²ç‚º `admin`
- æ¸…é™¤ç€è¦½å™¨å¿«å–ä¸¦é‡æ–°ç™»å…¥

### å•é¡Œï¼šSeed è…³æœ¬åŸ·è¡Œå¤±æ•—
- ç¢ºèªè³‡æ–™åº«é€£æ¥æ­£å¸¸
- ç¢ºèªå·²åŸ·è¡Œ `npm run migrate` å‰µå»ºè³‡æ–™è¡¨
- æª¢æŸ¥ `.env` æ–‡ä»¶ä¸­çš„è³‡æ–™åº«é…ç½®

## ç›¸é—œæ–‡ä»¶

- [è³‡æ–™åº« Schema](../src/db/schema.sql)
- [èªè­‰ä¸­é–“ä»¶](../src/middleware/auth.ts)
- [ç®¡ç†å¾Œå° API](../src/routes/admin.ts)

